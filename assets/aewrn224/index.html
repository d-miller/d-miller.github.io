<HTML>
<head>
    <link rel="stylesheet" href="styles.css">
    <script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js'></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.css' rel='stylesheet' />
    <style>.leaflet-control-attribution { display: none; }</style> <!--remove Mapbox caption-->
    <style>

.legend {
    line-height: 18px;
    color: #555;
    width: 85px;
    font-size: 0.91em;
}
.legend i {
    float: left;
    margin-right: 8px;
    background: white;
    opacity: 0.7;
    border-radius: 50%;
  	width: 10px;
  	height: 10px;
  	margin-top: 4px;
  	border: 1.5px solid black;
}
.legend .title {
	font-weight: bold;
}
.legend .circles {
	margin-left: 5px;
}

.legend .label div {
	margin-left: 25px;
	padding: 0;
	position: absolute;
}

.legend .size div {
	margin: 0;
	margin-bottom: -12px;
	padding: 0;
	border-radius: 50%;
	border: 1.5px solid black;
}
.leaflet-right .leaflet-control {
  margin-right: 5px;
}

.leaflet-bottom .leaflet-control {
  margin-bottom: 5px;
}

.leaflet-popup-content {
  padding: 0;
} 

.leaflet-popup-content-wrapper {
  width: 200px;
  border-radius: 10px;
  border: 1px solid #a1a1a1;
  box-shadow: 0 0 2px rgba(0,0,0,.3);
  margin-top: -10px;
  -moz-box-shadow: 0 0 2px rgba(0,0,0,.3);
  -webkit-box-shadow: 0 0 2px rgba(0,0,0,.3);
}

.leaflet-popup-close-button {
  display: none;
}

.leaflet-popup-tip {
  border-top: 10px solid lightgrey;
}
</style>
</head>
<body>
<div id='legend' style='display:none;'>
  
  <div class="info legend leaflet-control">	
    <div class="title">Number Women (2011-2013)</div>
  	 <div class="size">
	  	<div style="width: 8px;    height: 8px; margin-left: 6.6px; margin-top: 3px"></div><br>
	  	<div style="width: 13.8px; height: 13.8px; margin-left: 3.7px;"></div><br>
	  	<div style="width: 17.8px; height: 17.8px;  margin-left: 1.7px;"></div><br>
	  	<div style="width: 21.2px; height: 21.2px;"></div><br>
	  	
  	</div>
  	<div class="label">
  		<div style="top: 33px;">0-24</div>
  		<div style="top: 51px;">25-49</div>
  		<div style="top: 73px;">50-74</div>
  		<div style="top: 98px;">75+</div>
  	</div>

  	<div class="title">Percent Women</div>
  	<div class="circles">
	  	<i style="background: rgb(33,102,172);"></i> 0-5%<br>
	  	<i style="background: rgb(103,169,207)"></i> 5-10%<br>
	  	<i style="background: rgb(209,229,240);"></i> 10-15%<br>
	  	<i style="background: rgb(253,219,199);"></i> 15-20%<br>
	  	<i style="background: rgb(239,138,98);"></i> 20-25%<br>
	  	<i style="background: rgb(178,24,43);"></i> 25+%<br>
  	</div>
  </div>
</div>

	<div id="title">
	  <h1>Where Should Tech Companies Recruit To Diversify?</h1>
	  <h3>Percent Women Among Computer Science (C.S.) College Graduates, 2011-2013</h3>
	</div>
    <div id="map"></div>
    <div class="g-view">
	<div class="g-stepper">
	  <button class="g-prev g-disabled">Prev</button>
	  <button class="g-next">Next</button>
	    <div class="g-steps">
	      <a class="g-step g-selected" data-num="0" data-title="The Nation" data-text="Only 14.2% of the U.S.'s computer science (C.S.) bachelor's degrees were awarded to women during 2011 to 2013, down from 24.2% a decade ago. The definition of &quot;C.S.&quot; used here excludes some related fields like information technology (see methodology).">The Nation</a>
	      <a class="g-step" data-num="1" data-title="Boston" data-text="Some Boston universities such as Northeastern may want to adopt strategies from Harvard and MIT for recruiting women to tech. MIT is now #1 among top 25 C.S. programs for women's share of recent C.S. bachelor's degrees (32% women, up from 21% a decage ago).">Boston</a>
	      <a class="g-step" data-num="2" data-title="New York City" data-text="Though some specific schools fall behind, most NYC universities exceed national averages in recruiting women to tech. Such successes could attract tech recruiters to NYC, especially considering the city's high production of C.S. degrees overall.">NYC</a>
	      <a class="g-step" data-num="3" data-title="Washington D.C." data-text="D.C. beats all 50 states in women's share of recent C.S. bachelor's degrees at 25.0% women, compared to 14.2% nationally. However, one large D.C. school (University of Management and Technology) falls behind at 9.1% women.">DC</a>
	      <a class="g-step" data-num="4" data-title="Atlanta" data-text="Georgia State produced nearly three times as many female C.S. graduates than Georgia Tech, despite slightly fewer total C.S. graduates. Georgia Tech's prestigious C.S. program struggles in recruiting women to tech and has never exceeded national averages since at least 1987.">Atlanta</a>
	      <a class="g-step" data-num="5" data-title="Chicago" data-text="Chicago overall meets national averages for awarding C.S. degrees to women (14% women). However, this comparision masks differences between higher performing schools such as St Xavier (28%) and University of Chicago (24%) and lower performing schools such as DePaul (7.2%) and UIC (11%).">Chicago</a>
	      <a class="g-step" data-num="6" data-title="Salt Lake City" data-text="Men outnumbered women over 15 to 1 among Salt Lake City's recent C.S. graduates. Only 6.0% of these graduates were women, compared to 14% nationally. Neighboring universities such as Brigham Young (5.0% women) and Utah State (6.6% women) were also abysmal.">Salt Lake</a>
	      <a class="g-step" data-num="7" data-title="L.A. County" data-text="Harvey Mudd easily beats all other L.A. county schools in women's share of recent C.S. bachelor's degrees (37% women). The second highest performing school (Caltech) is almost 20 percentage points below that. UCLA's prestigous C.S. program is behind national averages (13% women).">LA</a>
	      <a class="g-step" data-num="8" data-title="Bay Area" data-text="Bay Area schools are behind national averages in recruiting women to tech, except for recent successes at the two most elite schools: Stanford and Berkeley. Both awarded 19% of their 2011-2013 C.S. bachelor's degrees to women, up from 7.5% (Stanford) and 12% (Berkeley) three years prior.">Bay Area</a>
	      <a class="g-step" data-num="9" data-title="Seattle" data-text="University of Washington's C.S. program supplies local tech giants Microsoft and Amazon with high numbers of talented women. Compared to other top 25 C.S. programs, UW's Seattle campus was #2 for women's share of recent C.S. degrees (26% women).">Seattle</a>
	    </div><!--end of g-steps-->
	  </div><!--end of g-stepper-->

	  <span class="g-view-title"></span>
	  <span class="g-view-text"></span>
	</div><!--end of g-view-->

	  <div id="sources"><p style="margin-top: 5px;">Source: 2011-2013 <a target="_blank" href="https://ncsesdata.nsf.gov/webcaspar/">IPEDS Completions Survey</a>, National Center for Educational Statistics. <span id="showMethods">Show methodology.</span></p></div>
  
  <script>
    var displayMethods = false;
    d3.select("#showMethods").on("click", toggleMethods);
    function toggleMethods(d) {
      if (!displayMethods) {
        d3.select("#methods").style("display", "block");
        d3.select("#showMethods").text("Hide methodology.");
        displayMethods = true;
      } else {
        d3.select("#methods").style("display", "none");
        d3.select("#showMethods").text("Show methodology.");
        displayMethods = false;
      }
    }
  </script>

      <div id="methods">
        <!--Data sources:<ul>
          <li>Population-level counts from the National Center for Education Statistics' <a target="_blank" href="https://ncsesdata.nsf.gov/webcaspar/Help/dataMapHelpDisplay.jsp?subHeader=DataSourceBySubject&type=DS&abbr=DEGS&noHeader=1&JS=No">Integrated Postsecondary Education Data System (IPEDS) Completions Survey</a>.
          <li>Accessed March 18th, 2015 through the National Science Foundation's <a target="_blank" href="https://ncsesdata.nsf.gov/webcaspar/">WebCASPAR Integrated Science and Engineering Resource Data System</a>.</li>
          </ul>-->
        Completeness of institutions:<ul>
          <li>Only institutions that produced at least 25 computer science bachelor's degrees during 2011-2013 are shown.</li>
          <li>A small handful of institutions like Princeton University awarded computer science bachelor's degrees during this time period, but their IPEDS data did not have sufficient detail about computer science degrees specifically. Those institutions are also not shown.</li>
          </ul>
        Definition of "computer science":<ul>
          <li>The definition of "computer science" was more restricted than some other definitions (only <a target="_blank" href="http://nces.ed.gov/ipeds/cipcode">CIP codes</a> <a target="_blank" href="http://nces.ed.gov/ipeds/cipcode/cipdetail.aspx?y=55&cipid=88075">11.0101</a> and <a target="_blank" href="http://nces.ed.gov/ipeds/cipcode/cipdetail.aspx?y=55&cipid=88085">11.0701</a> were used).</li> 
          <li>For instance, this definition excluded related fields such as computer graphics, computer and information systems security, and information technology.</li>
          <li>Excluding these related fields was nedeed to meaningfully compare across institutions that did and did not offer degrees in these related fields (in other words, "to compare apples to apples").</li>
          <li>These definitional issues are important to consider when comparing these numbers to other statistics. For instance, the national average for 2011-2013 for this restricted defintion was 14.2% women, but 17.9% women for a broader definition that included all <a target="_blank" href="http://nces.ed.gov/ipeds/cipcode/cipdetail.aspx?y=55&cipid=88073">11.xxxx CIP codes</a>.</li>
          </ul>
      </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="script.js"></script>
</body>
</HTML>